---------------------------------------------
PIC ASSEMBLER LISTING
Line    Address Opcode  Instruction
---------------------------------------------
0001    0000            ;DECLARACIONES VARIABLES
0002    0000            ;DATO EQU 0X21
0003    0000            ;stepper	EQU 0X7E
0004    0000            ;------------------------------ VARIABLES MOTORES INICIO --------------------------------------
0005    0000            CounterA EQU 0X21
0006    0000            CounterB EQU 0X22
0007    0000            CounterC EQU 0X23
0008    0000            
0009    0000            PasosX EQU 0X24                     ;Pasos que dara el motor por iteracion
0010    0000            PasosRegresoX EQU 0X25              ;Pasos que hara en el regreso para llegar posicion inical
0011    0000            PasosY EQU 0X26                     ;Pasos en Y para formar 0 a 90 grados
0012    0000            PasosRegresoY EQU 0X27              ;Pasos Regreso en Y de 90 a 0
0013    0000            NumeroIteracionesX EQU 0X28         ;Numero de veces que va hacer la iteracion de 90 (90*4 = 360)
0014    0000            
0015    0000            IrMayorXIteracion EQU 0X29          ;Guardar posicion de la iteracion en X donde encuentre mayor luz
0016    0000            IrMayorPasosY EQU 0X2A              ;Guardar posicion (pasos) en Y donde encuentre mas luz
0017    0000            
0018    0000            ;------------------------------ VARIABLES BOTON MOSTRAR INICIO --------------------------------------
0019    0000            ContadorBTN EQU 0X2B
0020    0000            DatoEnE  EQU 0X2C
0021    0000            NumGrupo  EQU 0X2D
0022    0000            
0023    0000            
0024    0000            INICIO
0025    0000            ;Inicio del programa ASIGNACIONES VARIABLES
0026    0000            	ORG	0X00
0027    0000            
0028    0000            ;------------------------CONFIGURACIONES PUERTOS --------------------------------------
0029    0000            ;------------------------------ PUERTO A y E --------------------------------------
0030    0000    3000    	MOVLW b'00000000'
0031    0001    00AB    	MOVWF ContadorBTN
0032    0002            
0033    0002    1683    	BSF     STATUS,RP0
0034    0003    1303        	BCF     STATUS,RP1
0035    0004    300E        	MOVLW   D'14'
0036    0005    009F        	MOVWF   ADCON1
0037    0006    3007    	MOVLW	B'111'
0038    0007    0089        	MOVWF   TRISE
0039    0008    1283        	BCF     STATUS,RP0
0040    0009    1303        	BCF     STATUS,RP1
0041    000A            
0042    000A    3007        	MOVLW   D'7'
0043    000B    00AD        	MOVWF   NumGrupo
0044    000C            ;------------------------------ PUERTO B --------------------------------------
0045    000C    1683    	BSF STATUS, 5 ;PONE 1 EN STATUS BIT 5 PARA MOVERNOS AL BANCO 1
0046    000D    0186    	CLRF TRISB; PONE EN 0 TRIS B Y LA BANDERA Z PONE SALIDA B 
0047    000E    0100    	CLRW; LIMPIAR W 
0048    000F    1283    	BCF STATUS, 5; PONE UN 0 EN BIT 5 Y NOS MOVEMOS AL BANCO 0 
0049    0010    3004    	MOVLW	4
0050    0011    00A8    	MOVWF	NumeroIteracionesX
0051    0012            ;------------------------------ PUERTO D --------------------------------------
0052    0012            
0053    0012            
0054    0012            
0055    0012            
0056    0012            
0057    0012            
0058    0012            
0059    0012            
0060    0012            ;PRUEBA para regresar el motor al mayor de luz  ELIMINAR
0061    0012    3001    	MOVLW	1 ; Moviendo a w El numero de iteraciones que vaya
0062    0013    00A9    	MOVWF	IrMayorXIteracion 
0063    0014    302D    	MOVLW	45; Moviendo a W el numero de pasos que vaya en Y
0064    0015    00AA    	MOVWF	IrMayorPasosY 
0065    0016            
0066    0016    2817    	GOTO	MENU ;mueve el ip al punto de la etiqueta
0067    0017            
0068    0017            ;--------------------------MENU PROGRAMA-------------------------------
0069    0017            MENU 
0070    0017            	;CALL	LOOP_GENERAL ; Mover Motores y buscar mayor luz 
0071    0017            	;CALL	IrMayorLuz;Moverme a Buscar LUz
0072    0017    289E    	GOTO	LEER_E_BTN
0073    0018    287F    	GOTO	SALIR	
0074    0019            
0075    0019            
0076    0019            ;------------------------------ MOTORES INICIO --------------------------------------
0077    0019            LOOP_GENERAL
0078    0019    3080    	MOVLW	128
0079    001A    00A4    	MOVWF	PasosX
0080    001B    00A5    	MOVWF	PasosRegresoX
0081    001C    202C    	CALL	MOVER_X
0082    001D    3080    	MOVLW	128
0083    001E    00A6    	MOVWF	PasosY
0084    001F    00A7    	MOVWF	PasosRegresoY 
0085    0020    2057    	CALL	CORRIDAY
0086    0021    0BA8    	DECFSZ	NumeroIteracionesX, 1
0087    0022    2819    	GOTO	LOOP_GENERAL
0088    0023    3004    	MOVLW	4
0089    0024    00A8    	MOVWF	NumeroIteracionesX
0090    0025    2826    	GOTO	LOOP_REGRESO_X
0091    0026            
0092    0026            LOOP_REGRESO_X
0093    0026    3080    	MOVLW	128
0094    0027    00A5    	MOVWF	PasosRegresoX
0095    0028    2048    	CALL	REGRESOX
0096    0029    0BA8    	DECFSZ	NumeroIteracionesX, 1
0097    002A    2826    	GOTO	LOOP_REGRESO_X
0098    002B            	;GOTO	FIN
0099    002B    3400    	RETLW	B'00000000'
0100    002C            
0101    002C            MOVER_X
0102    002C    300C    	MOVLW	B'00001100'
0103    002D    0086    	MOVWF	PORTB
0104    002E    203B    	CALL	DelayOneSecond
0105    002F    3006    	MOVLW	B'00000110'
0106    0030    0086    	MOVWF	PORTB
0107    0031    203B    	CALL	DelayOneSecond
0108    0032    3003    	MOVLW	B'00000011'
0109    0033    0086    	MOVWF	PORTB
0110    0034    203B    	CALL	DelayOneSecond
0111    0035    3009    	MOVLW	B'00001001'
0112    0036    0086    	MOVWF	PORTB
0113    0037    203B    	CALL	DelayOneSecond
0114    0038    0BA4    	DECFSZ	PasosX,1
0115    0039    282C    	GOTO	MOVER_X
0116    003A    3400    	RETLW	B'00000000'
0117    003B            
0118    003B            DelayOneSecond
0119    003B    3001    	movlw D'1'
0120    003C    00A3    	movwf CounterC
0121    003D    3004    	movlw D'4'
0122    003E    00A2    	movwf CounterB
0123    003F    3004    	movlw D'4'
0124    0040    00A1    	movwf CounterA
0125    0041            
0126    0041            Loop_Delay
0127    0041    0BA1    	decfsz CounterA,1
0128    0042    2841    	goto Loop_Delay
0129    0043    0BA2    	decfsz CounterB,1
0130    0044    2841    	goto Loop_Delay
0131    0045    0BA3    	decfsz CounterC,1
0132    0046    2841    	goto Loop_Delay
0133    0047    3400    	RETLW	b'00000000'
0134    0048            
0135    0048            REGRESOX
0136    0048    3009    	MOVLW	B'00001001'
0137    0049    0086    	MOVWF	PORTB
0138    004A    203B    	CALL	DelayOneSecond
0139    004B    3003    	MOVLW	B'00000011'
0140    004C    0086    	MOVWF	PORTB
0141    004D    203B    	CALL	DelayOneSecond
0142    004E    3006    	MOVLW	B'00000110'
0143    004F    0086    	MOVWF	PORTB
0144    0050    203B    	CALL	DelayOneSecond
0145    0051    300C    	MOVLW	B'00001100'
0146    0052    0086    	MOVWF	PORTB
0147    0053    203B    	CALL	DelayOneSecond
0148    0054    0BA5    	DECFSZ	PasosRegresoX,1
0149    0055    2848    	GOTO	REGRESOX
0150    0056    3400    	RETLW	B'00000000'
0151    0057            
0152    0057            CORRIDAY
0153    0057    30C0       	MOVLW	B'11000000'
0154    0058    0086    	MOVWF	PORTB
0155    0059    203B    	CALL	DelayOneSecond
0156    005A    3060    	MOVLW	B'01100000'
0157    005B    0086    	MOVWF	PORTB
0158    005C    203B    	CALL	DelayOneSecond
0159    005D    3030    	MOVLW	B'00110000'
0160    005E    0086    	MOVWF	PORTB
0161    005F    203B    	CALL	DelayOneSecond
0162    0060    3090    	MOVLW	B'10010000'
0163    0061    0086    	MOVWF	PORTB
0164    0062    203B    	CALL	DelayOneSecond
0165    0063    0BA6    	DECFSZ	PasosY ,1
0166    0064    2857    	GOTO	CORRIDAY
0167    0065    2866    	GOTO	REGRESOY
0168    0066            
0169    0066            REGRESOY
0170    0066    3090        	MOVLW	B'10010000'
0171    0067    0086    	MOVWF	PORTB
0172    0068    203B    	CALL	DelayOneSecond
0173    0069    3030    	MOVLW	B'00110000'
0174    006A    0086    	MOVWF	PORTB
0175    006B    203B    	CALL	DelayOneSecond
0176    006C    3060    	MOVLW	B'01100000'
0177    006D    0086    	MOVWF	PORTB
0178    006E    203B    	CALL	DelayOneSecond
0179    006F    30C0    	MOVLW	B'11000000'
0180    0070    0086    	MOVWF	PORTB
0181    0071    203B    	CALL	DelayOneSecond
0182    0072    0BA7    	DECFSZ	PasosRegresoY ,1
0183    0073    2866    	GOTO	REGRESOY
0184    0074    3400    	RETLW	B'00000000'
0185    0075            
0186    0075            FIN ; NO se utiliza esta etiqueta se comenta en linea 62 
0187    0075    3000     	MOVLW	B'00000000'
0188    0076    0086    	MOVWF	PORTB
0189    0077    3400    	RETLW	B'00000000'
0190    0078            	;Call	IrMayorLuz
0191    0078            
0192    0078            
0193    0078            IrMayorLuz
0194    0078    3080    	MOVLW	128
0195    0079    00A4    	MOVWF	PasosX
0196    007A    2080    	CALL	FullMayorX
0197    007B    0BA9    	DECFSZ	IrMayorXIteracion , 1
0198    007C    2878    	GOTO	IrMayorLuz
0199    007D    208F    	CALL	FullMayorY
0200    007E    3400    	RETLW	B'00000000'
0201    007F            
0202    007F            SALIR
0203    007F            	END
0204    007F    287F    	GOTO SALIR
0205    0080            
0206    0080            FullMayorX
0207    0080    300C    	MOVLW	B'00001100'
0208    0081    0086    	MOVWF	PORTB
0209    0082    203B    	CALL	DelayOneSecond
0210    0083    3006    	MOVLW	B'00000110'
0211    0084    0086    	MOVWF	PORTB
0212    0085    203B    	CALL	DelayOneSecond
0213    0086    3003    	MOVLW	B'00000011'
0214    0087    0086    	MOVWF	PORTB
0215    0088    203B    	CALL	DelayOneSecond
0216    0089    3009    	MOVLW	B'00001001'
0217    008A    0086    	MOVWF	PORTB
0218    008B    203B    	CALL	DelayOneSecond
0219    008C    0BA4    	DECFSZ	PasosX,1
0220    008D    2880    	GOTO	FullMayorX
0221    008E    3400    	RETLW	B'00000000'
0222    008F            
0223    008F            FullMayorY
0224    008F    30C0       	MOVLW	B'11000000'
0225    0090    0086    	MOVWF	PORTB
0226    0091    203B    	CALL	DelayOneSecond
0227    0092    3060    	MOVLW	B'01100000'
0228    0093    0086    	MOVWF	PORTB
0229    0094    203B    	CALL	DelayOneSecond
0230    0095    3030    	MOVLW	B'00110000'
0231    0096    0086    	MOVWF	PORTB
0232    0097    203B    	CALL	DelayOneSecond
0233    0098    3090    	MOVLW	B'10010000'
0234    0099    0086    	MOVWF	PORTB
0235    009A    203B    	CALL	DelayOneSecond
0236    009B    0BAA    	DECFSZ	IrMayorPasosY ,1
0237    009C    288F    	GOTO	FullMayorY
0238    009D    3400    	RETLW	B'00000000'
0239    009E            
0240    009E            ;------------------------------ BOTON E 0 INICIAL -----------------------------------------
0241    009E            LEER_E_BTN
0242    009E    0809    	MOVF PORTE, W ;Movemos lo de PUERTO E hacia W
0243    009F    00AC    	MOVWF DatoEnE ;Movemos la variable hacia dato en E
0244    00A0    3001    	MOVLW B'001' ; MOVEMOS A W EL 0 BIT de E  
0245    00A1    022C    	SUBWF DatoEnE,W ;VA A RESTARLE AL DATO E LO QUE ESTA EN W
0246    00A2    1903    	BTFSC STATUS, Z ; VERIFICA QUE EL STATUS DE LA OPERACION SEA 0 
0247    00A3    28A5    	GOTO  CONTAR ; SI LA OPERACION ES 0 SE VA A UN CONTAR
0248    00A4    289E    	GOTO  LEER_E_BTN ;REGRESA LOOP LEER
0249    00A5            
0250    00A5            CONTAR
0251    00A5    0A2B    	INCF  ContadorBTN, 0 ;incrementa e ContadorBTN en 1
0252    00A6    00AB    	MOVWF ContadorBTN
0253    00A7    3001    	MOVLW b'00000001'
0254    00A8    022B    	SUBWF ContadorBTN,W
0255    00A9    1903    	BTFSC STATUS, Z
0256    00AA    28B7    	GOTO  MOSTRAR1
0257    00AB            
0258    00AB    3002    	MOVLW b'00000010'
0259    00AC    022B    	SUBWF ContadorBTN,W
0260    00AD    1903    	BTFSC STATUS, Z
0261    00AE    28BF    	GOTO  MOSTRAR2
0262    00AF            
0263    00AF    3003    	MOVLW b'00000011'
0264    00B0    022B    	SUBWF ContadorBTN,W
0265    00B1    1903    	BTFSC STATUS, Z
0266    00B2    28C7    	GOTO  MOSTRAR3
0267    00B3            
0268    00B3    3004    	MOVLW b'00000100'
0269    00B4    022B    	SUBWF ContadorBTN, 0
0270    00B5    1903    	BTFSC STATUS, Z
0271    00B6    28CF    	GOTO  MOSTRAR4
0272    00B7            
0273    00B7            MOSTRAR1
0274    00B7            ;Al iniciar, mostrar cu�nto es el �ndice de luz (escala definida por el grupo)
0275    00B7    3001    	MOVLW B'00000001'
0276    00B8    0086    	MOVWF PORTB
0277    00B9    203B    	CALL	DelayOneSecond
0278    00BA    203B    	CALL	DelayOneSecond
0279    00BB    203B    	CALL	DelayOneSecond
0280    00BC    203B    	CALL	DelayOneSecond
0281    00BD    203B    	CALL	DelayOneSecond
0282    00BE    289E    	GOTO  LEER_E_BTN
0283    00BF            	;Mostrar el primer inciso
0284    00BF            MOSTRAR2
0285    00BF            ;Al presionar la tecla cambiar� y deber� mostrar el n�mero del dispositivo con la mayor
0286    00BF            ;cantidad de luz.
0287    00BF    3002    	MOVLW B'00000010'
0288    00C0    0086    	MOVWF PORTB
0289    00C1    203B    	CALL	DelayOneSecond
0290    00C2    203B    	CALL	DelayOneSecond
0291    00C3    203B    	CALL	DelayOneSecond
0292    00C4    203B    	CALL	DelayOneSecond
0293    00C5    203B    	CALL	DelayOneSecond
0294    00C6    289E    	GOTO  LEER_E_BTN
0295    00C7            	;Mostrar el segundo inciso
0296    00C7            MOSTRAR3
0297    00C7            ;Al presionar la tecla cambiar� y deber� mostrar el n�mero del dispositivo con la menor
0298    00C7            ;cantidad de luz.
0299    00C7    3004    	MOVLW B'00000100'
0300    00C8    0086    	MOVWF PORTB
0301    00C9    203B    	CALL	DelayOneSecond
0302    00CA    203B    	CALL	DelayOneSecond
0303    00CB    203B    	CALL	DelayOneSecond
0304    00CC    203B    	CALL	DelayOneSecond
0305    00CD    203B    	CALL	DelayOneSecond
0306    00CE    289E    	GOTO  LEER_E_BTN
0307    00CF            	;Mostrar el tercer inciso
0308    00CF            MOSTRAR4
0309    00CF            ;Al presionar la tecla cambiar� y mostrar� cu�l es su n�mero de dispositivo
0310    00CF    3008    	MOVLW B'00001000'
0311    00D0    0086    	MOVWF PORTB
0312    00D1    203B    	CALL	DelayOneSecond
0313    00D2    203B    	CALL	DelayOneSecond
0314    00D3    203B    	CALL	DelayOneSecond
0315    00D4    203B    	CALL	DelayOneSecond
0316    00D5    203B    	CALL	DelayOneSecond
0317    00D6            	;Mostrar el quinto inciso
0318    00D6    3000    	MOVLW B'00000000' 
0319    00D7    00AB    	MOVWF ContadorBTN ;resetea el ContadorBTN para empezar de nuevo
0320    00D8    289E    	GOTO  LEER_E_BTN
0321    00D9            	;Mostrar el cuarto inciso
---------------------------------------------
Number of errors = 0
